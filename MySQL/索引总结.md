#### 什么是索引

帮助mysql高效获取数据的排好序的数据结构，索引也是存放在硬盘文件中

myisam的表数据存放在.MYD中，而InnoDB的数据和索引一起保存在.IBD中



#### 索引的数据类型

1. hash  用的比较少 如果根据id查询的话很快，但是范围查询很慢
2. B+树 ：非叶子节点不保存数据，只保存索引值（这样非叶子节点的degree的值更大，会在叶子节点保存更多的数据），叶子节点之间会有双向指针连接（为了便于范围查询）

#### Mysql的存储引擎是数据表级别的，我们可以在创建表的时候指定引擎（默认InnoDB）

#### MyISM引擎的数据和索引是分开存放的（是两个文件）,MyISAM索引的叶子节点存放的是文件的指针，指向数据文件的地址。MyISM的主键索引和非主键索引（辅助索引）的存储方式没有区别

#### InnoDB的索引和数据是放在同一个文件的，InnoDB的主键索引（聚集索引）存放的是一条完整的数据。非主键索引（辅助索引）存放的是主键

#### 为什么InnoDB的非主键索引要保存主键值而不是保存记录？

       1.   因为主键索引保存的是记录，如果非主键索引保存的也是记录的话，那么要保存两份记录，占用额外内存，并且在修改数据的时候要维护两份记录的数据一致性很复杂

#### 为什么InnoDB一定要有主键？

1. 表数据本身就是按照BTree组织的一个索引结构文件，所以必须要有主键值，BTRee的分布要根据主键值
2. 如果我们没有指定的话会自动生成一个数据作为BTree的排序规则
3. 为什么主键最好设为自增型（在查找的时候整型的比较大小会更快，而且在插入数据的时候可以直接插在叶子节点链表的最后，如果是UUID的话，如果UUID是自动产生的话可能不会插到链表的最后，会插在任意位置，这样会导致BTree的重新分裂，耗性能 ）



#### Mysql可以将多个字段作为主键（联合主键），那么此时的聚集索引为联合索引



#### 复合索引的的查找会首先对比复合索引最左边的字段，一样的话再对比第二个，第三个字段（最佳左匹配的基础）







  



