**B树和B+树的应用场景**：查找磁盘中的大量数据





### B树

​      多路平衡查找树树

**与二叉平衡树的区别**：

        1. 平衡二叉树节点最多有两个子树，而 B 树每个节点可以有多个子树，**M 阶 B 树表示该树每个节点最多有 M 个子树**
        2. 平衡二叉树每个节点只有一个数据和两个指向孩子的指针，而 K阶B 树每个**中间节点**有 k-1 个关键字（可以理解为数据）和 k 个子树（ **k 介于阶数 M 和 M/2 之间，M/2 向上取整）
        3. B 树的所有叶子节点都在同一层，并且叶子节点只有关键字，指向孩子的指针为 null

![](https://keyon-edu.oss-cn-beijing.aliyuncs.com/img/TIM%E6%88%AA%E5%9B%BE20200228134104.png)



**B 树的每个节点可以表示的信息更多，因此整个树更加“矮胖”，这在从磁盘中查找数据（先读取到内存、后查找）的过程中，可以减少磁盘 IO 的次数，从而提升查找速度**



**B树如何保持平衡**

          1. 添加的时候保持平衡
             - 首先考虑要插入的子树是否已经超出了关键字数的限制
             - 超出的话，如果要插入的位置是叶子节点，就只能拆一个关键字添加到要插入位置的父节点
             - 如果非叶子节点，就得从其他子树拆子树给新插入的元素做孩子





### B+树

![](https://keyon-edu.oss-cn-beijing.aliyuncs.com/img/TIM%E6%88%AA%E5%9B%BE20200228135311.png)



一棵 B+ 树需要满足以下条件：

1. 节点的子树数和关键字数相同（B 树是子树数比关键字数多一）
2. 节点的关键字表示的是子树中的最大数，在子树中同样含有这个数据
3. 叶子节点包含了全部数据，同时符合左小右大的顺序



简单概括下 B+ 树的三个特点：

        1. 关键字数和子树相同
        2. 非叶子节点仅用作索引，它的关键字和子节点有重复元素
        3. 叶子节点用指针连在一起（为了便于范围查询）



B+ 树的三个优点：

1. 层级更低，IO 次数更少
2. 每次都需要查询到叶子节点，查询性能稳定
3. 叶子节点形成有序链表，范围查询方便

**B+树之所以可以容纳更多的数据是因为非叶子节点不保存数据的话就可以保存过多的分叉，进而在叶子节点上会保存更多的数据**





[相关博客](https://juejin.im/entry/5b0cb64e518825157476b4a9)





