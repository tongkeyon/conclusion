###  

###  



### 非事务日志

####    二进制日志（binary log）

​       对数据库数据产生改变的操作会被记录到二进制日志中，语句以"事件"的形式保存，所以包含了时间、事件开始和结束位置等信息。**存储引擎的上层**产生的，不管是什么存储引擎，对数据库进行了修改都会产生二进制日志，另外**binary log还可以实现主从复制**

####    错误日志（error log）

​    MySQL服务启动和关闭过程中的信息以及其它错误和警告信息。默认在数据目录下

####    慢查询日志（slow query log）

   log-slow-queries记录所有超过long_query_time时间的SQL语句，

####     一般查询日志（general log）

  用于记录select查询语句的日志。general_log、general_log_file 默认关闭，建议关闭

####    中继日志（relay log）

   从主服务器的二进制文件中复制的事件，并保存为二进制文件，格式和二进制日志一样






### 事务日志

####  重做日志（redo log）

​     redo log是innodb层产生的。确保事务的持久性。防止在发生故障的时间点，尚有脏页未写入磁盘，在重启mysql服务的时候，根据redo log进行重做，从而达到事务的持久性这一特性，在事务的执行过程中，便开始写入redo log文件中

​    **redo log会将新产生的数据进行备份，在系统发生崩溃时，虽然数据没有持久化，但只要日志进行持久化，就可以根据日志进行数据的恢复**。

####  回滚日志（undo log）

undo log 也是由innodb层产生的。可以确保事务的原子性，实现多版本并发控制（MVCC）在操作任何数据之前，首先将数据备份到一个地方。这就是undo log,然后进行数据的修改，如果进行数据的回滚，系统可以利用undo log中的数据备份将数据进行恢复。事务开始之前，将当前是的版本生成undo log



### redo log 和 bin log 的区别

​     二进制日志的作用之一是还原数据库的，这与redo log很类似，很多人混淆过，但是两者有本质的不同。



 **作用不同**：redo log是保证事务的持久性的，是事务层面的，binlog作为还原的功能，是数据库层面的（当然也可以精确到事务层面的），虽然都有还原的意思，但是其保护数据的层次是不一样的。



**内容不同**：redo log是物理日志，是数据页面的修改之后的物理记录，binlog是逻辑日志，可以简单认为记录的就是sql语句另外，两者日志产生的时间，可以释放的时间，在可释放的情况下清理机制，都是完全不同的。
恢复数据时候的效率，基于物理日志的redo log恢复数据的效率要高于语句逻辑日志的binlog





**1.redo log通常是物理日志，记录的是数据页的物理修改，而不是某一行或某几行修改成怎样怎样，它用来恢复提交后的物理数据页(恢复数据页，且只能恢复到最后一次提交的位置)。**
**2.undo用来回滚行记录到某个版本。undo log一般是逻辑日志，根据每行记录进行记录。**







































































































